!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("@angular/common")):"function"==typeof define&&define.amd?define("ng-numeric-keyboard",["exports","@angular/core","@angular/forms","@angular/common"],t):t((e=e||self)["ng-numeric-keyboard"]={},e.ng.core,e.ng.forms,e.ng.common)}(this,(function(e,t,n,r){"use strict";var o={number:[[{key:"1"},{key:"2"},{key:"3"},{key:"del",rowspan:2}],[{key:"4"},{key:"5"},{key:"6"}],[{key:"7"},{key:"8"},{key:"9"},{key:"enter",rowspan:2}],[{key:"."},{key:"0"},{key:"esc"}]],tel:[[{key:"1"},{key:"2"},{key:"3"}],[{key:"4"},{key:"5"},{key:"6"}],[{key:"7"},{key:"8"},{key:"9"}],[{key:"del"},{key:"0"},{key:"enter"}]],phone:[[{key:"1"},{key:"2"},{key:"3"},{key:"del"}],[{key:"4"},{key:"5"},{key:"6"},{key:"enter"}],[{key:"7"},{key:"8"},{key:"9"},{key:"."}],[{key:""},{key:"0"},{key:""},{key:"esc"}]]},i="number",s="Enter",a=function(){function e(){this.layout=i,this.entertext=s,this.press=new t.EventEmitter,this.enterpress=new t.EventEmitter,this.ENTER="enter",this.DEL="del",this.ESC="esc"}return e.prototype.ngOnInit=function(){var e={layout:this.layout,entertext:this.entertext};this.init(e)},e.prototype.dispatch=function(e,t){switch(e){case"press":this.press.emit(t);break;case"enterpress":this.enterpress.emit()}},e.prototype.onTouchend=function(e){this.dispatch("press",e),"enter"===e&&this.dispatch("enterpress")},e.prototype.init=function(e){var t,n=e.layout;if("string"==typeof n){if(t=o[n],!Array.isArray(t))throw new Error(n+" is not a build-in layout.")}else if(t=n,!Array.isArray(t)||!t.every((function(e){return Array.isArray(e)})))throw new Error("custom layout must be a two-dimensional array.");this.kp=e,this.ks={resolvedLayout:t}},e.decorators=[{type:t.Component,args:[{selector:"ng-numeric-keyboard",template:'<table class="numeric-keyboard">\n    <tr *ngFor="let r of ks.resolvedLayout">\n        <td *ngFor="let c of r"\n            [attr.rowspan]="c.rowspan"\n            [attr.colspan]="c.colspan"\n            [attr.data-key]="c.key"\n            [attr.data-icon]="c.key === ENTER ? kp.entertext : c.key"\n            class="numeric-keyboard-key"\n            (touchend)="onTouchend(c.key)"\n        >\n            <div *ngIf="c.key === DEL" class="del-icon" [ngClass]="c.rowspan === 2 ? \'half\' : \'\'">&nbsp;</div>\n            <div *ngIf="c.key === ESC" class="down-icon">&nbsp;</div>\n        </td>\n    </tr>\n</table>\n',styles:['.del-icon{background-repeat:no-repeat;background-size:contain;background-position:center;background-image:url("data:image/svg+xml,%3C%3Fxml version%3D%221.0%22 encoding%3D%22utf-8%22%3F%3E%3C!-- Generator%3A Adobe Illustrator 23.1.1%2C SVG Export Plug-In . SVG Version%3A 6.00 Build 0)  --%3E%3Csvg version%3D%221.1%22 id%3D%22%EB%A0%88%EC%9D%B4%EC%96%B4_1%22 xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22 xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22 x%3D%220px%22%09 y%3D%220px%22 viewBox%3D%220 0 96 96%22 style%3D%22enable-background%3Anew 0 0 96 96%3B%22 xml%3Aspace%3D%22preserve%22%3E%3Cstyle type%3D%22text%2Fcss%22%3E%09.st0%7Bfill%3A%235D5D5D%3B%7D%09.st1%7Bfill%3A%233F3A3B%3B%7D%3C%2Fstyle%3E%3Cg%3E%09%3Cpath class%3D%22st0%22 d%3D%22M77.2%2C28L77.2%2C28H38.1c-1.8%2C0-3.5%2C0.7-4.8%2C1.9L16.8%2C46c-1.1%2C1.1-1.1%2C2.8-0.1%2C4c0%2C0%2C0%2C0%2C0.1%2C0.1l16.3%2C16.1%09%09c1.3%2C1.2%2C3%2C1.9%2C4.8%2C1.9h39.1c1.6%2C0%2C2.9-1.3%2C2.9-2.8l0%2C0V31C80.1%2C29.3%2C78.8%2C28%2C77.2%2C28z M67.5%2C56.6c-0.3%2C0.3-0.8%2C0.5-1.2%2C0.5%09%09c0%2C0%2C0%2C0-0.1%2C0c-0.5%2C0-0.9-0.2-1.3-0.6l-6.2-6.2l-6.2%2C6.2c-0.7%2C0.7-1.8%2C0.7-2.5%2C0c-0.4-0.3-0.6-0.8-0.6-1.3c0-0.5%2C0.2-0.9%2C0.5-1.3%09%09l6.2-6.2l-6.2-6.2c-0.7-0.7-0.7-1.8%2C0-2.5c0.7-0.7%2C1.8-0.8%2C2.6-0.1l6.2%2C6.2l6.2-6.2c0.8-0.7%2C1.9-0.7%2C2.6%2C0l0%2C0l-0.4%2C0.4l0.4-0.3%09%09c0.7%2C0.7%2C0.7%2C1.9%2C0%2C2.5L61.4%2C48l6.2%2C6.2c0.4%2C0.4%2C0.6%2C0.9%2C0.6%2C1.4C68.1%2C55.8%2C67.9%2C56.3%2C67.5%2C56.6z%22%2F%3E%09%3Cpath class%3D%22st1%22 d%3D%22M67.2%2C39.6L67.2%2C39.6L67.2%2C39.6z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E");width:100%;height:100%;margin-left:-1px}.half{height:50%}.down-icon{background-repeat:no-repeat;background-size:contain;background-position:center;background-image:url("data:image/svg+xml,%3C%3Fxml version%3D%221.0%22 encoding%3D%22utf-8%22%3F%3E%3C!-- Generator%3A Adobe Illustrator 23.1.1%2C SVG Export Plug-In . SVG Version%3A 6.00 Build 0)  --%3E%3Csvg version%3D%221.1%22 id%3D%22%EB%A0%88%EC%9D%B4%EC%96%B4_1%22 xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22 xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22 x%3D%220px%22%09 y%3D%220px%22 viewBox%3D%220 0 512 512%22 style%3D%22enable-background%3Anew 0 0 512 512%3B%22 xml%3Aspace%3D%22preserve%22%3E%3Cstyle type%3D%22text%2Fcss%22%3E%09.st0%7Bfill%3A%235D5D5D%3B%7D%3C%2Fstyle%3E%3Cg%3E%09%3Cpath class%3D%22st0%22 d%3D%22M255.9%2C468.6c-27.5-27.5-55.4-55.5-83.2-83.4c55.4%2C0%2C111.2%2C0%2C166.6%2C0C311.4%2C413%2C283.5%2C440.9%2C255.9%2C468.6z%22%2F%3E%09%3Cpath class%3D%22st0%22 d%3D%22M468.8%2C88.2c0-26.8-18-44.7-44.8-44.7c-55.9%2C0-111.8%2C0-167.7%2C0c-56.2%2C0-112.5%2C0-168.7%2C0%09%09c-26.2%2C0-44.3%2C18-44.3%2C44.3c-0.1%2C70-0.2%2C140-0.2%2C210.1c0%2C26.2%2C18.1%2C44.5%2C44.2%2C44.5c112.5%2C0.1%2C224.9%2C0.1%2C337.4%2C0%09%09c26.1%2C0%2C44.1-18.3%2C44.2-44.5C468.9%2C227.9%2C468.9%2C158%2C468.8%2C88.2z M362.9%2C107.8c13.8%2C0%2C27.6%2C0%2C41.8%2C0c0%2C14.3%2C0%2C28%2C0%2C42.1%09%09c-14%2C0-27.7%2C0-41.8%2C0C362.9%2C135.9%2C362.9%2C122%2C362.9%2C107.8z M299%2C107.7c13.8%2C0%2C27.5%2C0%2C41.8%2C0c0%2C14.2%2C0%2C28.1%2C0%2C42.2%09%09c-14%2C0-27.7%2C0-41.8%2C0C299%2C135.8%2C299%2C121.9%2C299%2C107.7z M235.1%2C107.7c14.1%2C0%2C27.8%2C0%2C41.8%2C0c0%2C14.1%2C0%2C28%2C0%2C42.2c-14%2C0-27.7%2C0-41.8%2C0%09%09C235.1%2C135.8%2C235.1%2C122%2C235.1%2C107.7z M235.1%2C171.7c14.1%2C0%2C27.8%2C0%2C41.8%2C0c0%2C14.1%2C0%2C28%2C0%2C42.2c-14%2C0-27.7%2C0-41.8%2C0%09%09C235.1%2C199.9%2C235.1%2C186%2C235.1%2C171.7z M107.4%2C107.7c14.1%2C0%2C27.8%2C0%2C41.8%2C0c0%2C14.1%2C0%2C28%2C0%2C42.2c-14%2C0-27.7%2C0-41.8%2C0%09%09C107.4%2C135.8%2C107.4%2C122%2C107.4%2C107.7z M149.1%2C213.9c-14%2C0-27.9%2C0-42%2C0c0-14.5%2C0-28.1%2C0-42c14%2C0%2C27.8%2C0%2C42%2C0%09%09C149.1%2C185.8%2C149.1%2C199.7%2C149.1%2C213.9z M171.1%2C107.8c13.9%2C0%2C27.7%2C0%2C41.9%2C0c0%2C13.9%2C0%2C27.8%2C0%2C42c-13.8%2C0-27.5%2C0-41.9%2C0%09%09C171.1%2C135.8%2C171.1%2C122%2C171.1%2C107.8z M171.3%2C171.8c13.7%2C0%2C27.6%2C0%2C41.8%2C0c0%2C14.2%2C0%2C28%2C0%2C42.1c-13.9%2C0-27.6%2C0-41.8%2C0%09%09C171.3%2C199.9%2C171.3%2C186.1%2C171.3%2C171.8z M340.7%2C299.3c-56.4%2C0-112.7%2C0-169.4%2C0c0-13.8%2C0-27.7%2C0-42.2c56.5%2C0%2C112.8%2C0%2C169.4%2C0%09%09C340.7%2C271.2%2C340.7%2C285.1%2C340.7%2C299.3z M340.9%2C213.8c-13.9%2C0-27.7%2C0-41.9%2C0c0-14%2C0-27.9%2C0-42c13.8%2C0%2C27.6%2C0%2C41.9%2C0%09%09C340.9%2C185.8%2C340.9%2C199.6%2C340.9%2C213.8z M404.8%2C213.8c-13.9%2C0-27.7%2C0-41.9%2C0c0-14%2C0-27.9%2C0-42c13.8%2C0%2C27.6%2C0%2C41.9%2C0%09%09C404.8%2C185.8%2C404.8%2C199.6%2C404.8%2C213.8z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E");width:70%;height:70%;margin:auto}.numeric-keyboard{width:100%;height:100%;background:#e0e0e0;table-layout:fixed;border-collapse:separate;border-spacing:7px;font-size:2em;text-align:center}.numeric-keyboard-key{touch-action:manipulation;-webkit-transition:background .3s;transition:background .3s;color:#3b3b3b;background:#fafafa;padding:5px 0;border-radius:5px}.numeric-keyboard-key:active{background:#e1e1e1}.numeric-keyboard-key[data-key=""]{pointer-events:none;background:#edeef1}.numeric-keyboard-key[data-key=esc]{background:#edeef1}.numeric-keyboard-key[data-key=enter]{color:#5695e8;background:#ededed;font-size:20px;letter-spacing:-.5px!important}.numeric-keyboard-key[data-key="."],.numeric-keyboard-key[data-key=del]{background:#ededed;color:#4c4c4c}.numeric-keyboard-key[data-key="."]:active,.numeric-keyboard-key[data-key=del]:active,.numeric-keyboard-key[data-key=enter]:active{background:#d5d5d5}.numeric-keyboard-key[data-icon]::before{content:attr(data-icon)}.numeric-keyboard-key[data-icon=del]::before,.numeric-keyboard-key[data-icon=esc]::before{display:block;content:" "}']}]}],e.propDecorators={layout:[{type:t.Input}],entertext:[{type:t.Input}],press:[{type:t.Output}],enterpress:[{type:t.Output}]},e}();var c,u=window.requestAnimationFrame||window.setTimeout,C=function(e,t,n){void 0===t&&(t=function(){}),void 0===n&&(n=60);var r=!0,o=0,i=function(s){r&&(e(s,++o,n),o<n?u(i,0):t())};return u(i,0),function(){r=!1}},l=function(e){return null!=e&&""+e!="false"},p=/^\d*(?:\.\d*)?$/,d=/^\d*$/,y={register:function(e){this.unregister(),c=e,document.addEventListener("touchend",this.unregister,!1)},unregister:function(e){c&&(e&&(c.ks.inputElement.contains(e.target)||c.ks.keyboardElement.contains(e.target))||(c.closeKeyboard(),c=null,document.removeEventListener("touchend",this.unregister,!1)))}},h={type:"number",value:"",autofocus:!1,disabled:!1,readonly:!1,maxlength:255,name:"",placeholder:"",format:"^",layout:"number",entertext:"Enter"},m=function(){function e(e,n,r,o){this.element=e,this.appRef=n,this.componentFactoryResolver=r,this.injector=o,this._autofocus=h.autofocus,this._disabled=h.disabled,this._readonly=h.readonly,this._value=h.value,this.activeColor="#3B3B3B",this.isFocus=!1,this.type=h.type,this.value=h.value,this.maxlength=h.maxlength,this.name=h.name,this.placeholder=h.placeholder,this.format=h.format,this.layout=h.layout,this.entertext=h.entertext,this.focus=new t.EventEmitter,this.blur=new t.EventEmitter,this.enterpress=new t.EventEmitter,this.ngModelChange=new t.EventEmitter,this._onChange=function(e){}}return Object.defineProperty(e.prototype,"autofocus",{get:function(){return this._autofocus},set:function(e){this._autofocus=l(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(e){this._disabled=l(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readonly",{get:function(){return this._readonly},set:function(e){this._readonly=l(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngModel",{get:function(){return this._value},set:function(e){if(this.ks&&this.ks.value!==e){var t=e.toString().split(""),n=t.length;this.set("rawValue",t),this.set("cursorPos",n)}this._value=e},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e={};for(var t in h)e[t]=this[t];this.init(e)},e.prototype.ngOnDestroy=function(){y.unregister(null)},e.prototype.ngAfterViewInit=function(){this.onMounted(this.element.nativeElement.querySelector(".numeric-input"))},e.prototype.ngAfterViewChecked=function(){this.onUpdated()},e.prototype.trackByIndex=function(e){return e},e.prototype.writeValue=function(e){this._value=void 0===typeof e||null===e?"":e},e.prototype.registerOnChange=function(e){this._onChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.onFocus=function(e){e.stopPropagation(),this.openKeyboard();var t=+e.target.dataset.index;this.set("cursorPos",isNaN(t)?this.ks.rawValue.length:t)},e.prototype.dispatch=function(e,t){switch(e){case"focus":this.focus.emit();break;case"blur":this.blur.emit();break;case"enterpress":this.enterpress.emit();break;case"input":this.ngModelChange.emit(t)}},e.prototype.createKeyboard=function(e,t,n,r){var o=this.componentFactoryResolver.resolveComponentFactory(a).create(this.injector);for(var i in Object.assign(o.instance,t),o.instance.ngOnInit(),n)o.instance[i].subscribe(n[i]);this.appRef.attachView(o.hostView),e.appendChild(o.hostView.rootNodes[0]),r(o)},e.prototype.destroyKeyboard=function(e,t){t.destroy(),this.appRef.detachView(t.hostView)},e.prototype.init=function(e){var t,n=e.format;"string"==typeof n&&(t=new RegExp(e.format),n=function(e){return t.test(e)});var r=e.value,o=r.toString().split(""),i=o.length;this.kp=e,this.ks={formatFn:n,value:r,rawValue:o,cursorPos:i,cursorColor:null,cursorActive:!1,keyboard:null,inputElement:null,keyboardElement:null}},e.prototype.set=function(e,t){this.ks[e]=t},e.prototype.onMounted=function(e){var t=this;this.set("inputElement",e),this.set("cursorColor",this.activeColor),!this.kp.autofocus||this.kp.readonly||this.kp.disabled||setTimeout((function(){return t.openKeyboard()}),500)},e.prototype.onUpdated=function(){this.moveCursor()},e.prototype.input=function(e){var t=this,n=this.kp,r=n.type,o=n.maxlength,i=this.ks,s=i.rawValue,a=i.cursorPos,c=i.formatFn,u=function(e){var n=void 0!==e,i=s.slice();n?i.splice(a,0,e):i.splice(a-1,1);var u=i.join("");if(c(u)){if("number"===r){if(!p.test(u))return;u=parseFloat(u),isNaN(u)&&(u="")}else if(u.length>o||"tel"===r&&!d.test(u))return;t.set("value",u),t.set("rawValue",i),t.set("cursorPos",n?a+1:a-1),t.dispatch("input",u)}};switch(e){case"":break;case"esc":this.closeKeyboard();break;case"enter":this.closeKeyboard(),this.dispatch("enterpress");break;case"del":a>0&&u(void 0);break;case".":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":default:u(e)}},e.prototype.moveCursor=function(){if(this.ks.cursorActive){var e=this.ks.inputElement.querySelector(".numeric-input-cursor"),t=this.ks.inputElement.querySelector(".numeric-input-text"),n=t.querySelector("span:nth-child("+this.ks.cursorPos+")");if(!n)return e.style.transform="translateX(0)",void(t.style.transform="translateX(0)");var r=n.offsetLeft+n.offsetWidth,o=t.parentNode.offsetWidth;e.style.transform="translateX("+Math.min(o-1,r)+"px)",t.style.transform="translateX("+Math.min(0,o-r)+"px)"}},e.prototype.openKeyboard=function(){var e=this;if(!this.ks.keyboard){var t=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div");t.className="numeric-keyboard-actionsheet",t.appendChild(n),t.appendChild(r),document.body.appendChild(t),this.createKeyboard(r,{layout:this.kp.layout||this.kp.type,entertext:this.kp.entertext},{press:this.input.bind(this)},(function(t){return e.set("keyboard",t)})),C((function(e,t,n){r.style.position="fixed",r.style.bottom="0",r.style.left="0",r.style.transform="translateY("+(n-t)/n*100+"%)"}),(function(){}),10),this.set("keyboardElement",r),this.set("cursorActive",!0),this.set("cursorPos",this.ks.rawValue.length),this.isFocus=!0,this.dispatch("focus"),y.register(this)}},e.prototype.closeKeyboard=function(){var e=this;if(this.ks.keyboard){var t=this.ks.keyboard,n=this.ks.keyboardElement;C((function(e,t,r){n.style.transform="translateY("+t/r*100+"%)"}),(function(){setTimeout((function(){e.destroyKeyboard(n,t),document.body.removeChild(n.parentNode)}),50)}),10),this.set("keyboard",null),this.set("keyboardElement",null),this.set("cursorActive",!1),this.set("cursorPos",0),this.isFocus=!1,this.dispatch("blur"),y.unregister(null)}},e.decorators=[{type:t.Component,args:[{selector:"ng-numeric-input",template:'<div class="numeric-input-container">\n    <div class="numeric-input" [class.readonly]="kp.readonly" [class.disabled]="kp.disabled" (touchend)="onFocus($event)">\n        <div>\n            <div class="numeric-input-text">\n                <span class="input-text" *ngFor="let value of ks.rawValue; let i = index; trackBy: trackByIndex"\n                      [attr.data-index]="i">\n                    {{ value }}\n                </span>\n            </div>\n            <div *ngIf="ks.rawValue.length === 0" class="numeric-input-placeholder">\n                <span class="typo-placeholder">\n                    {{ kp.placeholder }}\n                </span>\n            </div>\n            <div *ngIf="ks.cursorActive" class="numeric-input-cursor blinking-cursor"\n                 [style.background]="ks.cursorColor">\n            </div>\n        </div>\n    </div>\n</div>\n',providers:[{provide:n.NG_VALUE_ACCESSOR,useExisting:t.forwardRef((function(){return e})),multi:!0}],styles:[".numeric-input-container{display:-webkit-box;display:flex;text-align:left}.numeric-input-container .numeric-input{display:block;background:0 0;width:100%;height:100%;padding:0;text-align:inherit}.numeric-input-container .numeric-input.disabled,.numeric-input-container .numeric-input.readonly{opacity:.5;pointer-events:none}.numeric-input-container .numeric-input>div{position:relative;overflow:hidden;height:100%}.numeric-input-container .numeric-input-placeholder{color:#757575}.numeric-input-container .numeric-input-text{width:10000%}.numeric-input-container .numeric-input-text .input-text{letter-spacing:-1.8px}.numeric-input-container .numeric-input-cursor{pointer-events:none;position:absolute;left:1px;top:1px;width:1px;height:90%;-webkit-animation:1s steps(1) infinite numeric-input-cursor;animation:1s steps(1) infinite numeric-input-cursor}.numeric-input-container .numeric-keyboard-actionsheet{position:fixed;bottom:0;left:0;width:100%;height:40%}.numeric-input-container .numeric-keyboard-actionsheet>div:first-child{height:100%}.numeric-input-container .numeric-keyboard-actionsheet>div:last-child{position:absolute;top:0;right:0;bottom:0;left:0;-webkit-transform:translateY(100%);transform:translateY(100%);box-shadow:0 -2px 4px 0 #cfd4da}@-webkit-keyframes numeric-input-cursor{50%{background-color:transparent}}@keyframes numeric-input-cursor{50%{background-color:transparent}}"]}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:t.ApplicationRef},{type:t.ComponentFactoryResolver},{type:t.Injector}]},e.propDecorators={activeColor:[{type:t.Input}],autofocus:[{type:t.Input}],disabled:[{type:t.Input}],readonly:[{type:t.Input}],ngModel:[{type:t.Input}],type:[{type:t.Input}],value:[{type:t.Input}],maxlength:[{type:t.Input}],name:[{type:t.Input}],placeholder:[{type:t.Input}],format:[{type:t.Input}],layout:[{type:t.Input}],entertext:[{type:t.Input}],focus:[{type:t.Output}],blur:[{type:t.Output}],enterpress:[{type:t.Output}],ngModelChange:[{type:t.Output}]},e}();var k=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{exports:[m,a],declarations:[m,a],entryComponents:[a],imports:[r.CommonModule,n.FormsModule]}]}],e}(),f=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{exports:[k]}]}],e}();e.NgNumericKeyboardModule=f,e.NumericInputComponent=m,e.NumericInputModule=k,e.NumericKeyboardComponent=a,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ng-numeric-keyboard.umd.min.js.map